{"ast":null,"code":"/**\n * Conatins all the service handlers for the student related actions\n */\nimport * as actionTypes from \"./actionTypes\";\nimport { student_list_response } from \"../fakeData\";\nimport axios from \"axios\";\nimport Cookies from 'universal-cookie';\nconst baseUrl = \"https://get-sat-pro.herokuapp.com/api\";\nconst cookies = new Cookies();\n/**\n * gets the list of students after communicating with the get_students API\n */\n//credentials: 'include' sends the cookie along with request. fetch by default does not inlude cookies\n// export function getStudentList() {\n//     return async dispatch => {\n//         dispatch({\n//             type: actionTypes.GET_STUDENT_LIST_STARTED\n//         });\n//         return fetch(`${baseUrl}/get_students`,{\n//             method: \"GET\",\n//             headers: {\n//                 'Content-Type': 'application/json',\n//                 'Accept': 'application/json',\n//                 'Authorization': `Bearer ${localStorage.getItem(\"token\")}`,\n//                 'session': cookies.get('session')\n//             },\n//             credentials: 'include'\n//         })\n//         .then(response => response.json())\n//         .then(payload => {\n//             if (student_list_response.Status === 200) {\n//                 dispatch({\n//                     type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n//                     payload: student_list_response.students\n//                 })\n//             }\n//             else {\n//                 dispatch({\n//                     type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n//                     error: student_list_response.students\n//                 })\n//             }\n//         })\n//     }\n//   }\n\nexport function getStudentList() {\n  return async dispatch => {\n    dispatch({\n      type: actionTypes.GET_STUDENT_LIST_STARTED\n    });\n    return axios.get(\"\".concat(baseUrl, \"/get_students\"), {\n      withCredentials: true\n    }, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': \"Bearer \".concat(localStorage.getItem(\"token\"))\n      }\n    }).then(result => {\n      console.log(result.data);\n      dispatch({\n        type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n        payload: result.data.students\n      });\n    }).catch(error => {\n      dispatch({\n        type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n        error: error.data.message\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/annuabraham/Documents/GitHub/ENPM613/client/src/actions/studentHandler.js"],"names":["actionTypes","student_list_response","axios","Cookies","baseUrl","cookies","getStudentList","dispatch","type","GET_STUDENT_LIST_STARTED","get","withCredentials","headers","localStorage","getItem","then","result","console","log","data","GET_STUDENT_LIST_SUCCESS","payload","students","catch","error","message"],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,WAAZ,MAA6B,eAA7B;AACA,SAASC,qBAAT,QAAsC,aAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,MAAMC,OAAO,GAAG,uCAAhB;AAEA,MAAMC,OAAO,GAAG,IAAIF,OAAJ,EAAhB;AAGA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASG,cAAT,GAA0B;AAC7B,SAAO,MAAMC,QAAN,IAAkB;AACrBA,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAER,WAAW,CAACS;AADb,KAAD,CAAR;AAGA,WAAOP,KAAK,CAACQ,GAAN,WAAaN,OAAb,oBAAqC;AAACO,MAAAA,eAAe,EAAE;AAAlB,KAArC,EACP;AACIC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,kBAAU,kBAFL;AAGL,0CAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B;AAHK;AADb,KADO,EAQNC,IARM,CAQDC,MAAM,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,IAAnB;AACAZ,MAAAA,QAAQ,CAAC;AACLC,QAAAA,IAAI,EAAER,WAAW,CAACoB,wBADb;AAELC,QAAAA,OAAO,EAAEL,MAAM,CAACG,IAAP,CAAYG;AAFhB,OAAD,CAAR;AAIH,KAdM,EAeNC,KAfM,CAeAC,KAAK,IAAG;AACXjB,MAAAA,QAAQ,CAAC;AACLC,QAAAA,IAAI,EAAER,WAAW,CAACoB,wBADb;AAELI,QAAAA,KAAK,EAAEA,KAAK,CAACL,IAAN,CAAWM;AAFb,OAAD,CAAR;AAIH,KApBM,CAAP;AAqBL,GAzBC;AA0BH","sourcesContent":["/**\n * Conatins all the service handlers for the student related actions\n */\nimport * as actionTypes from \"./actionTypes\";\nimport { student_list_response } from \"../fakeData\";\nimport axios from \"axios\";\nimport Cookies from 'universal-cookie';\nconst baseUrl = \"https://get-sat-pro.herokuapp.com/api\";\n\nconst cookies = new Cookies();\n\n\n/**\n * gets the list of students after communicating with the get_students API\n */\n\n//credentials: 'include' sends the cookie along with request. fetch by default does not inlude cookies\n// export function getStudentList() {\n//     return async dispatch => {\n//         dispatch({\n//             type: actionTypes.GET_STUDENT_LIST_STARTED\n//         });\n//         return fetch(`${baseUrl}/get_students`,{\n//             method: \"GET\",\n//             headers: {\n//                 'Content-Type': 'application/json',\n//                 'Accept': 'application/json',\n//                 'Authorization': `Bearer ${localStorage.getItem(\"token\")}`,\n//                 'session': cookies.get('session')\n//             },\n//             credentials: 'include'\n//         })\n//         .then(response => response.json())\n//         .then(payload => {\n//             if (student_list_response.Status === 200) {\n//                 dispatch({\n//                     type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n//                     payload: student_list_response.students\n//                 })\n//             }\n//             else {\n//                 dispatch({\n//                     type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n//                     error: student_list_response.students\n//                 })\n//             }\n//         })\n//     }\n//   }\n\nexport function getStudentList() {\n    return async dispatch => {\n        dispatch({\n            type: actionTypes.GET_STUDENT_LIST_STARTED\n        });\n        return axios.get(`${baseUrl}/get_students`, {withCredentials: true},\n        {\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`,\n            }\n        })\n        .then(result => {\n            console.log(result.data);\n            dispatch({\n                type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n                payload: result.data.students\n            })\n        })\n        .catch(error =>{\n            dispatch({\n                type: actionTypes.GET_STUDENT_LIST_SUCCESS,\n                error: error.data.message\n            });\n        })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"/**\n * Contains service handlers for all user account actions\n */\nimport * as actionTypes from \"./actionTypes\";\nimport axios from \"axios\";\naxios.defaults.baseURL = 'https://get-sat-pro.herokuapp.com/api';\naxios.defaults.headers.common['Accept'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json'; //axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem(\"token\")}` \n//axios.defaults.withCredentials = true;\n\nexport let token = \"\";\n/**\n * loginUser communicates with the login API, and logs in the user. Also stores the JWT token in the local storage\n * @param {Object} user \n */\n\nexport function loginUser(user) {\n  // return async dispatch =>{\n  //     return axios.get(`${baseUrl}/logout`, {\n  //         headers: {\n  //             'Content-Type': 'application/json',\n  //             'Accept': 'application/json',\n  //         }\n  //     })\n  // }\n  // return function(dispatch){\n  //     return  axios.post(`/login`, user)\n  //         .then(result => {\n  //             sessionStorage.setItem(\"token\", result.data.token)\n  //                 dispatch({\n  //                     type: actionTypes.LOGIN_USER_SUCESS,\n  //                     payload: result.data\n  //             })\n  //         })\n  //         .catch(error => {\n  //             dispatch({\n  //                 type: actionTypes.LOGIN_USER_FAILED,\n  //                 error: error.response.data.message\n  //             });\n  //         })\n  // }\n  return async dispatch => {\n    dispatch({\n      type: actionTypes.LOGIN_USER_STARTED\n    });\n    return axios.post(\"/login\", user).then(result => {\n      sessionStorage.setItem(\"token\", result.data.token);\n      console.log(\"token\", sessionStorage.getItem(\"token\"));\n      dispatch({\n        type: actionTypes.LOGIN_USER_SUCESS,\n        payload: result.data\n      });\n    }).catch(error => {\n      dispatch({\n        type: actionTypes.LOGIN_USER_FAILED,\n        error: error.response.data.message\n      });\n    });\n  };\n}\n/**\n * registerUser communicated with registerUser API, registers the user. \n * @param {Object} registerData \n */\n\nexport function registerUser(registerData) {\n  return async dispatch => {\n    dispatch({\n      type: actionTypes.REGISTERATION_STARTED\n    });\n    return axios.post(\"/register\", registerData).then(result => {\n      dispatch({\n        type: actionTypes.REGISTRATION_SUCCESS,\n        payload: result.data.message\n      });\n    }).catch(error => {\n      dispatch({\n        type: actionTypes.REGISTRATION_FAILED,\n        error: error.response.message\n      });\n    });\n  };\n}\n/**\n * logoutUser communicates with the logout API and removes the JWT token from the local storage\n */\n\nexport function logoutUser() {\n  return async dispatch => {\n    dispatch({\n      type: actionTypes.LOGOUT_USER_STARTED\n    });\n    return axios.get(\"/logout\").then(payload => {\n      localStorage.removeItem(\"token\", payload.token);\n      dispatch({\n        type: actionTypes.LOGOUT_USER_SUCESS,\n        payload: payload.data.message\n      });\n    }).catch(error => {\n      dispatch({\n        type: actionTypes.LOGOUT_USER_FAILED,\n        error: error.response.data.message\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/annuabraham/Documents/GitHub/ENPM613/src/actions/userHandler.js"],"names":["actionTypes","axios","defaults","baseURL","headers","common","post","token","loginUser","user","dispatch","type","LOGIN_USER_STARTED","then","result","sessionStorage","setItem","data","console","log","getItem","LOGIN_USER_SUCESS","payload","catch","error","LOGIN_USER_FAILED","response","message","registerUser","registerData","REGISTERATION_STARTED","REGISTRATION_SUCCESS","REGISTRATION_FAILED","logoutUser","LOGOUT_USER_STARTED","get","localStorage","removeItem","LOGOUT_USER_SUCESS","LOGOUT_USER_FAILED"],"mappings":"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","sourcesContent":["/**\n * Contains service handlers for all user account actions\n */\n\nimport * as actionTypes from \"./actionTypes\";\nimport axios from \"axios\";\n\naxios.defaults.baseURL = 'https://get-sat-pro.herokuapp.com/api';\naxios.defaults.headers.common['Accept'] = 'application/json';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n//axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem(\"token\")}` \n//axios.defaults.withCredentials = true;\n\nexport let token=  \"\";\n/**\n * loginUser communicates with the login API, and logs in the user. Also stores the JWT token in the local storage\n * @param {Object} user \n */\nexport function loginUser(user) {\n\n    // return async dispatch =>{\n    //     return axios.get(`${baseUrl}/logout`, {\n    //         headers: {\n    //             'Content-Type': 'application/json',\n    //             'Accept': 'application/json',\n    //         }\n    //     })\n    // }\n\n    // return function(dispatch){\n    //     return  axios.post(`/login`, user)\n    //         .then(result => {\n    //             sessionStorage.setItem(\"token\", result.data.token)\n    //                 dispatch({\n    //                     type: actionTypes.LOGIN_USER_SUCESS,\n    //                     payload: result.data\n    //             })\n    //         })\n    //         .catch(error => {\n    //             dispatch({\n    //                 type: actionTypes.LOGIN_USER_FAILED,\n    //                 error: error.response.data.message\n    //             });\n    //         })\n    // }\n\n    return async dispatch => {\n        dispatch({\n            type: actionTypes.LOGIN_USER_STARTED\n        });\n        return axios.post(`/login`, user)\n        .then(result => {\n            sessionStorage.setItem(\"token\", result.data.token);\n            console.log(\"token\",sessionStorage.getItem(\"token\"))\n            dispatch({\n                type: actionTypes.LOGIN_USER_SUCESS,\n                payload: result.data\n            })\n        })\n        .catch(error => {\n            dispatch({\n                type: actionTypes.LOGIN_USER_FAILED,\n                error: error.response.data.message\n            });\n        })\n    }\n}\n\n/**\n * registerUser communicated with registerUser API, registers the user. \n * @param {Object} registerData \n */\nexport function registerUser(registerData) {\n    return async dispatch => {\n        dispatch({\n            type: actionTypes.REGISTERATION_STARTED\n        });\n        return axios.post(`/register`, registerData)\n            .then(result => {\n                dispatch({\n                    type: actionTypes.REGISTRATION_SUCCESS,\n                    payload: result.data.message\n                })\n            })\n            .catch(error => {\n                dispatch({\n                    type: actionTypes.REGISTRATION_FAILED,\n                    error: error.response.message\n                });\n            })\n    }\n\n}\n/**\n * logoutUser communicates with the logout API and removes the JWT token from the local storage\n */\nexport function logoutUser() {\n    return async dispatch => {\n        dispatch({\n            type: actionTypes.LOGOUT_USER_STARTED\n        });\n        return axios.get(`/logout`)\n            .then(payload => {\n                localStorage.removeItem(\"token\", payload.token);\n                dispatch({\n                    type: actionTypes.LOGOUT_USER_SUCESS,\n                    payload: payload.data.message\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: actionTypes.LOGOUT_USER_FAILED,\n                    error: error.response.data.message\n                });\n            })\n    }\n}\n"]},"metadata":{},"sourceType":"module"}